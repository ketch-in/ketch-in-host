<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
    <script src="./ketch-in-components.umd.js"></script>
  </head>
  <body>
    <div id="app"></div>
    <div id="toast"></div>
    <script>
      const root = document.querySelector("#app");
      const toastRoot = document.querySelector("#toast");
      const { ToastController, SelectModalController, ModalController, ToolbarController } =
        window.ketchInComponents;
      const toastController = new ToastController(toastRoot, { removeDelay: 2000 });
      const selectController = new SelectModalController(root, { removeDelay: 2000, modalWidth: 400 });
      const modalController = new ModalController(root, { removeDelay: 2000, modalWidth: 200 });
      const toolbarController = new ToolbarController(root, {});

      /* 툴바 */
      toolbarController.add({
        status: 'KetchIn',
        handlePen: () => console.log('switch to drawing line mode'),
        handleShape: selectedShape => console.log(`switch to drawing [${selectedShape.type}] shape mode`),
        // TODO: selectedShape 객체의 svg 필드 활용
        handleColor: selectedColor => console.log(`pen color is now [${selectedColor}]`),
        onClear: () => console.log('clear canvas'),
      });

      /* 토스트 */
      for (let i = 1; i < 5; i++) {
        setTimeout(() => {
          const p = document.createElement("p");
          p.innerText = `Toast ${i} TEST`;
          toastController.add({
            children: p,
            data: { i },
            momentDelay: 3000,
            onClick: (item) => {
              item.unmount(true);
              console.log(item.getData());
            },
            onClose: (item, action) => {
              console.log("456", i, item, action);
            },
          });
        }, i * 500);
      }

      /* 셀렉트-모달 */
      for (let i = 1; i < 3; i++) {
        setTimeout(() => {
          const p = document.createElement("p");
          p.innerText = `SelectModal TEST (${i})`;
          selectController.add({
            children: p,
            buttons: { yes: "확인", no: "취소" },
            onClick: (item, id, label) => {
              console.log(item, id, label);
            },
          });
        }, i * 1000);
      }

      /* 모달 */
      for (let i = 1; i < 3; i++) {
        setTimeout(() => {
          const p = document.createElement("p");
          p.innerText = `Modal (${i})`;
          modalController.add({
            children: p,
            onClose: (item) => {
              console.log(item);
            },
          });
        }, i * 1000);
      }
    </script>
  </body>
</html>
